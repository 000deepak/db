# Updating Documents in MongoDB
MongoDB provides several methods to update documents in collections. These methods allow you to modify existing documents based on certain criteria or update all documents in a collection.

## 1. Update Methods
 
### Single Document: updateOne()
The updateOne() method updates a single document that matches the specified filter criteria.

Syntax:
```js
db.collection.updateOne(filter, update, options)
filter: Specifies the selection criteria for the update operation.
update: Specifies the modifications to apply using update operators.
options: Optional parameters like upsert (create a new document if no match is found) and writeConcern.
```

Example:
```js
db.users.updateOne(
    { "username": "john_doe" },
    { $set: { "status": "inactive" } }
)
```
This updates the status to "inactive" for the user with the username "john_doe".

### Update Multiple Documents: updateMany()
The updateMany() method updates all documents that match the specified filter criteria.

Syntax:
```js
db.collection.updateMany(filter, update, options)
filter: Specifies the selection criteria for the update operation.
update: Specifies the modifications to apply using update operators.
options: Optional parameters like upsert and writeConcern.
```
Example:
```js
db.users.updateMany(
    { "status": "active" },
    { $set: { "status": "inactive" } }
)
```
This updates the status to "inactive" for all users whose status is "active".

## 2. Update Operators
- MongoDB uses update operators such as $set, $unset, $inc, $push, $addToSet, and more to perform specific update operations.
- Examples of Update Operators:
### 1. $set: Sets the value of a field in a document.
Example:

```js
db.users.updateOne(
    { "username": "john_doe" },
    { $set: { "email": "john.doe@example.com" } }
)
```
This sets the email address for the user with the username "john_doe".

### 2. $unset: Removes a field from a document.
Example:

```js
db.users.updateOne(
    { "username": "john_doe" },
    { $unset: { "email": "" } }
)
```
This removes the email field from the user document with the username "john_doe".

### 3. $inc: Increments the value of a field by a specified amount.
Example:

```js
db.users.updateOne(
    { "username": "john_doe" },
    { $inc: { "loginCount": 1 } }
)
```
This increments the loginCount field by 1 for the user with the username "john_doe".

### 4. $push: Appends a value to an array field.
Example:

```js
db.users.updateOne(
    { "username": "john_doe" },
    { $push: { "orders": { "product": "iPhone", "quantity": 1 } } }
)
```
This adds an order object to the orders array for the user with the username "john_doe".

## 3. Update Options
### 1. Upsert
The upsert option creates a new document if no documents match the filter criteria.

Example:

```js
db.users.updateOne(
    { "username": "jane_smith" },
    { $set: { "status": "active" } },
    { upsert: true }
)
```
This sets the status to "active" for the user with the username "jane_smith". If no document matches, it creates a new document with the specified fields.

## 4. Write Concern
Write concern specifies the level of acknowledgment requested from MongoDB for write operations.

Example:

```js
db.users.updateMany(
    { "status": "active" },
    { $set: { "status": "inactive" } },
    { writeConcern: { w: "majority", j: true, wtimeout: 5000 } }
)
```
This updates the status to "inactive" for all users whose status is "active" with the specified write concern.

## Summary
Single Document Update: Use updateOne() to update a single document.
Multiple Document Update: Use updateMany() to update multiple documents.
Update Operators: Use operators like $set, $unset, $inc, $push, and $addToSet for specific update operations.
Update Options: Utilize options like upsert to create new documents if none match the filter, and writeConcern for specifying the acknowledgment level.

# Extra

## update for  update full/part feilds
- update 
	- replace				
		- match1 
		- way1 
		- overwrite doc 
		- `must give all existing field + new field`
```js
db.myCollection1.update(
	{firstName: "fn1"},
	{firstName: "fn1", lastName:"hello"}
);
```

- update 
	- replace multiple fields	
	- match1 
	- way1 
	- overwrite doc 
	- `must give all existing field + new field`
```js	
db.myCollection1.update(
{firstName: "fn1"},
{firstName: "fn1", lastName:"hello", gender:"male"}
);
```

- update 
	- set (insert key)					
	- match1 
	- way2 
	- add/modify field 
	- $set: {} 
	- `give only insert field`
```js	
db.myCollection1.update(
{firstName: "fn1"},
{$set: {score:44}}
);
```

- update 
	- set (update key)
```js		
db.myCollection1.update(
{firstName: "fn1"},
{$set: {score:5}}
);
```

- update 
	- inc (increment key)		
	- increment by 5 
	- `give updated only field(s)`
```js		
db.myCollection1.update(
{firstName: "fn1"},
{$inc: {score:5}}
);
```

- update 
	- unset (remove key)		
	- match1 
	- remove field 
	- $unset: {} 
	- `give only new field`
```js		
db.myCollection1.update(
{firstName: "fn1"},
{$unset: {score:1}}
);
```

- update 
	- unset (remove key) 
	- same as above
```js	
db.myCollection1.update(
{firstName: "fn1"},
{$unset: {score:0}}
);
```

- update 
	- insert/update 
	- upsert
```js	
db.myCollection1.update(
{firstName: "fn1"},
{firstName: "fn1", lastName: "lnnn"},
{upsert: true}
);
```

- update 
	- rename
```js	
db.myCollection1.update(
{firstName: "fn1"},
{$rename: {score: score2}}
);

db.myCollection1.update({'_id':ObjectId("598aea8feb8b4de45c012fc8")},{$set:{'title':'New MongoDB Tutorial'}})

db.myCollection1.update(
{'firstName':'fn1'},
{$set:{'title':'New MongoDB Tutorial'}},
{multi:true}        //- to update multiple documents, set a parameter 'multi' to true
)
```

- replace
```js	
db.myCollection1.save(
 	{
 	  "_id" : ObjectId("598aea8feb8b4de45c012fc8"),
 	   "title":"11 author 1 New Topic",
 		 "by":"author 1"
 	}
)
```